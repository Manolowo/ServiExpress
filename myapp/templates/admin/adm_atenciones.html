<h2>Atenciones Inscritas</h2>

{% if atenciones %}
<div class="col-md-12">
  <table class="atencion-table">
    <thead>
      <tr>
        <th class="table-header">Id</th>
        <th class="table-header">Cliente</th>
        <th class="table-header">Lista de Atenciones</th>
        <th class="table-header">Fecha de Atencion</th>
        <th class="table-header">Total de la Atencion</th>
        <th class="table-header">Estado de la Atencion</th>
        <th class="table-header">Acciones</th> 
      </tr>
    </thead>
    <tbody>
      {% for atencion in atenciones %}
        <tr>
          <td>{{ atencion.ate_id }}</td>
          <td>{{ atencion.userProfile.user_name }} {{ atencion.userProfile.user_lastname }}</td>
          <td>{{ atencion.ate_list }}</td>
          <td>{{ atencion.ate_date }}</td>
          <td>{{ atencion.ate_prec }}</td>
          <td>{{ atencion.ate_est }}</td>

          <td>
            <button class="facturar-btn" data-atencion-id="{{ atencion.ate_id }}">Facturar</button>
        </td>
        
        </tr>
      {% endfor %}
    </tbody>
  </table>
</div>

{% else %}
  <p class="no-atencion">No hay Atenciones inscritas.</p>
{% endif %}

<script>
  document.querySelectorAll('.facturar-btn').forEach(btn => {
      btn.addEventListener('click', function() {
          const ate_id = this.getAttribute('data-atencion-id');
          window.open(`/facturar_atencion/${ate_id}/`, '_blank');  // Cambia aqu√≠
      });
  });
</script>

